<!DOCTYPE HTML>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Preise & Rechner – MASZ Solutions</title>
  <link rel="stylesheet" href="assets/css/main.css" />
  <link rel="stylesheet" href="assets/css/masz.css" />
</head>
<body class="is-preload page--plain">

<div id="wrapper">
  <header id="header">
    <a href="home.html" class="logo"><img src="assets/logo.png" alt="">MASZ Solutions</a>
    <nav id="nav">
      <ul class="links">
        <li><a href="home.html">Home</a></li>
        <li><a href="preise.html" class="active">Preise</a></li>
        <li><a href="projekte.html">Projekte</a></li>
        <li><a href="solar.html">Solar</a></li>
      </ul>
    </nav>
  </header>

  <div id="main">
    <section class="post">
      <header class="major">
        <h1>Richtwerte & Kostenrechner</h1>
        <p>Alle Werte sind <strong>Richtwerte</strong>; die endgültige Kalkulation erfolgt nach Absprache mit allen Tourdaten und unserer Disposition.</p>
      </header>

      <div class="price-wrap">

        <!-- Abrechnungsart -->
        <div class="row">
          <label>Abrechnungsart</label>
          <select id="mode">
            <option value="km">pro Kilometer</option>
            <option value="hour">pro Stunde</option>
            <option value="day">pro Tag</option>
          </select>
        </div>

        <!-- km -->
        <div class="row mode-km">
          <label>Distanz (km)</label>
          <input id="distance" type="number" min="0" step="1" value="250">
        </div>
        <div class="row mode-km">
          <label class="muted">Richtwert</label>
          <div><strong>0,81 €/km</strong></div>
        </div>

        <!-- Stunde -->
        <div class="row mode-hour">
          <label>Stunden</label>
          <input id="hours" type="number" min="0" step="0.5" value="6">
        </div>
        <div class="row mode-hour">
          <label class="muted">Richtwert</label>
          <div><strong>32 €/h</strong> &middot; Standzeit <strong>17 €/h</strong> &middot; <strong>20 min</strong> frei</div>
        </div>

        <!-- Tag -->
        <div class="row mode-day">
          <label>Tage</label>
          <input id="days" type="number" min="1" step="1" value="1">
        </div>
        <div class="row mode-day">
          <label class="muted">Richtwert</label>
          <div><strong>194 €/Tag (9 h inkl. Pause)</strong> &middot; <strong>km bis 300 km inklusive</strong></div>
        </div>

        <!-- Gemeinsame Zuschläge -->
        <div class="row">
          <label>Be-/Entladezeit (Minuten) – <strong>20 min frei</strong></label>
          <input id="loadMins" type="number" min="0" step="5" value="30">
        </div>
        <div class="row">
          <label>Standzeit (Stunden) – wenn Wagen steht</label>
          <input id="standHours" type="number" min="0" step="0.5" value="1">
        </div>

        <!-- Nacht/So/Feiertag (+25% auf Stunde/Tag) -->
        <div class="row">
          <label><input type="checkbox" id="nightHoliday"> Nacht / Sonntag / Feiertag <strong>(+25 %)</strong> – gilt für Stunde/Tag</label>
        </div>

        <div class="row">
          <label>Maut / Sonstiges (€)</label>
          <input id="extras" type="number" min="0" step="1" value="0">
        </div>

        <div class="row">
          <button id="calcBtn" class="button primary" type="button">Berechnen</button>
          <button id="saveBtn" class="button" type="button">Einstellungen merken</button>
          <button id="resetBtn" class="button" type="button">Zurücksetzen</button>
        </div>

        <!-- Ergebnis -->
        <div class="card" style="margin-top:10px">
          <h3>Ergebnis (Richtwert)</h3>
          <table>
            <tbody id="breakdown"><tr><td>Bitte auf „Berechnen“ klicken.</td></tr></tbody>
            <tfoot><tr class="total"><td>Gesamtsumme (netto)</td><td id="total">–</td></tr></tfoot>
          </table>
          <p class="muted"><strong>Tagessatz:</strong> Kilometer <strong>inklusive bis 300 km</strong>, darüber Aufpreis.</p>
        </div>

      </div>
    </section>
  </div>

  <footer id="footer">
    <p class="copyright">© <span id="y"></span> MASZ Solutions ·
      <a href="impressum.html">Impressum</a> · <a href="datenschutz.html">Datenschutz</a></p>
  </footer>
</div>

<!-- Header-Scroll-Effekt -->
<script>
(function(){
  const h = document.getElementById('header');
  function onS(){ window.scrollY>10 ? h.classList.add('scrolled') : h.classList.remove('scrolled'); }
  window.addEventListener('scroll', onS, {passive:true}); onS();
  document.getElementById('y').textContent = new Date().getFullYear();
})();
</script>

<!-- Rechner -->
<script>
(function(){
  const $ = id => document.getElementById(id);

  const PRICES = {
    km:   { rate: 0.81 },
    hour: { rate: 32 },
    day:  { rate: 194 },
    stand: { freeMins: 20, rate: 17 },
    nightHolidayPct: 0.25
  };

  function euro(n){ return (Math.round(n*100)/100).toFixed(2).replace('.', ',') + ' €'; }

  function toggleFields(){
    const mode = $("mode").value;
    document.querySelectorAll(".mode-km").forEach(el => el.style.display   = (mode==="km")   ? "grid" : "none");
    document.querySelectorAll(".mode-hour").forEach(el => el.style.display = (mode==="hour") ? "grid" : "none");
    document.querySelectorAll(".mode-day").forEach(el => el.style.display  = (mode==="day")  ? "grid" : "none");
  }

  function calc(){
    const mode = $("mode").value;
    const distance   = parseFloat($("distance")?.value || 0);
    const hours      = parseFloat($("hours")?.value || 0);
    const days       = parseFloat($("days")?.value || 0);
    const loadMins   = parseFloat($("loadMins").value || 0);
    const standHours = parseFloat($("standHours").value || 0);
    const extras     = parseFloat($("extras").value || 0);
    const night      = $("nightHoliday").checked;

    let rows = [], total = 0;

    const billableLoadMins = Math.max(loadMins - PRICES.stand.freeMins, 0);
    const loadCost = (billableLoadMins/60) * PRICES.stand.rate;
    if (billableLoadMins > 0) {
      rows.push(["Be-/Entladezeit (über 20 min)", billableLoadMins + " min × " + PRICES.stand.rate + " €", euro(loadCost)]);
      total += loadCost;
    }

    if (standHours > 0) {
      const c = standHours * PRICES.stand.rate;
      rows.push(["Standzeit", standHours + " h × " + PRICES.stand.rate + " €", euro(c)]);
      total += c;
    }

    if (mode === "km") {
      const c = distance * PRICES.km.rate;
      rows.push(["Kilometer", distance + " km × " + PRICES.km.rate.toFixed(2) + " €", euro(c)]);
      total += c;
    }

    if (mode === "hour") {
      let c = hours * PRICES.hour.rate;
      if (night) c *= (1 + PRICES.nightHolidayPct);
      rows.push([night ? "Fahrzeit (Nacht/So/FT +25%)" : "Fahrzeit", hours + " h × " + PRICES.hour.rate + " €", euro(c)]);
      total += c;
    }

    if (mode === "day") {
      let c = days * PRICES.day.rate;
      if (night) c *= (1 + PRICES.nightHolidayPct);
      rows.push([night ? "Tagessatz (Nacht/So/FT +25%)" : "Tagessatz", days + " × " + PRICES.day.rate + " €", euro(c)]);
      rows.push(["Hinweis", "<strong>Kilometer bis 300 km inklusive</strong>, darüber Aufpreis.", ""]);
      total += c;
    }

    if (extras > 0) {
      rows.push(["Maut / Sonstiges", "", euro(extras)]);
      total += extras;
    }

    $("breakdown").innerHTML = rows.map(r => `<tr><td>${r[0]}<br><span class="muted">${r[1]}</span></td><td>${r[2]}</td></tr>`).join("");
    $("total").textContent = euro(total);
  }

  function save(){
    const data = {
      mode: $("mode").value,
      distance: $("distance")?.value || "",
      hours: $("hours")?.value || "",
      days: $("days")?.value || "",
      loadMins: $("loadMins").value,
      standHours: $("standHours").value,
      extras: $("extras").value,
      nightHoliday: $("nightHoliday").checked
    };
    localStorage.setItem("maszRechner", JSON.stringify(data));
  }
  function load(){
    try {
      const data = JSON.parse(localStorage.getItem("maszRechner") || "{}");
      if (data.mode) $("mode").value = data.mode;
      if ($("distance") && data.distance !== undefined) $("distance").value = data.distance;
      if ($("hours") && data.hours !== undefined) $("hours").value = data.hours;
      if ($("days") && data.days !== undefined) $("days").value = data.days;
      if (data.loadMins !== undefined) $("loadMins").value = data.loadMins;
      if (data.standHours !== undefined) $("standHours").value = data.standHours;
      if (data.extras !== undefined) $("extras").value = data.extras;
      $("nightHoliday").checked = !!data.nightHoliday;
    } catch(e){}
    toggleFields();
  }
  function resetAll(){
    localStorage.removeItem("maszRechner");
    $("mode").value = "km";
    if ($("distance")) $("distance").value = "250";
    if ($("hours")) $("hours").value = "6";
    if ($("days")) $("days").value = "1";
    $("loadMins").value = "30";
    $("standHours").value = "1";
    $("extras").value = "0";
    $("nightHoliday").checked = false;
    $("breakdown").innerHTML = "<tr><td>Bitte Eingaben setzen und „Berechnen“ klicken.</td></tr>";
    $("total").textContent = "–";
    toggleFields();
  }

  $("mode").addEventListener("change", toggleFields);
  $("calcBtn").addEventListener("click", calc);
  $("saveBtn").addEventListener("click", save);
  $("resetBtn").addEventListener("click", resetAll);
  window.addEventListener("DOMContentLoaded", load);
})();
</script>
</body>
</html>
