
<!DOCTYPE HTML>
<html lang="de">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Preise & Rechner – MASZ Solutions</title>
  <link rel="stylesheet" href="assets/css/main.css" />
  <link rel="stylesheet" href="assets/css/masz.css" />
</head>
<body class="is-preload"><div id="wrapper">

<header id="header"><a href="home.html" class="logo"><img src="assets/logo.png" alt="" style="height:28px;margin-right:.4rem">MASZ Solutions</a></header>

<div id="main"><section class="post">
  <header class="major">
    <h1>Richtwerte & Kostenrechner</h1>
    <p class="muted">Alle Werte sind <strong>Richtwerte</strong>; die endgültige Kalkulation erfolgt nach Absprache mit allen Tourdaten und unserer Disposition.</p>
  </header>

  <div class="price-wrap">
    <div class="row"><label>Abrechnungsart</label>
      <select id="mode"><option value="km">pro Kilometer</option><option value="hour">pro Stunde</option><option value="day">pro Tag</option></select>
    </div>

    <div class="row mode-km"><label>Distanz (km)</label><input id="distance" type="number" min="0" step="1" value="250"></div>
    <div class="row mode-km"><label class="muted">Richtwert</label><div><strong>0,81 €/km</strong> · Mindestpreis <strong>67 €</strong></div></div>

    <div class="row mode-hour"><label>Stunden</label><input id="hours" type="number" min="0" step="0.5" value="6"></div>
    <div class="row mode-hour"><label class="muted">Richtwert</label><div><strong>32 €/h</strong> · Standzeit <strong>17 €/h</strong> · <strong>20 min</strong> frei</div></div>

    <div class="row mode-day"><label>Tage</label><input id="days" type="number" min="1" step="1" value="1"></div>
    <div class="row mode-day"><label class="muted">Richtwert</label><div><strong>194 €/Tag (9 h inkl. Pause)</strong> · <strong>km bis 300 km inklusive</strong></div></div>

    <div class="row"><label>Be-/Entladezeit (Minuten) – <strong>20 min frei</strong></label><input id="loadMins" type="number" min="0" step="5" value="30"></div>
    <div class="row"><label>Standzeit (Stunden) – wenn Wagen steht</label><input id="standHours" type="number" min="0" step="0.5" value="1"></div>

    <div class="row"><label><input type="checkbox" id="nightHoliday"> Nacht / Sonntag / Feiertag <strong>(+25 %)</strong> – gilt für Stunde/Tag</label></div>
    <div class="row"><label>Maut / Sonstiges (€)</label><input id="extras" type="number" min="0" step="1" value="0"></div>

    <div class="row">
      <button id="calcBtn" class="button primary" type="button">Berechnen</button>
      <button id="saveBtn" class="button" type="button">Einstellungen merken</button>
      <button id="resetBtn" class="button" type="button">Zurücksetzen</button>
      <a id="bookBtn" class="button" href="#" style="margin-left:auto">Anfrage/Buchung starten</a>
    </div>

    <div class="card" style="margin-top:10px">
      <h3>Ergebnis (Richtwert)</h3>
      <table><tbody id="breakdown"><tr><td>Bitte auf „Berechnen“ klicken.</td></tr></tbody>
        <tfoot><tr class="total"><td>Gesamtsumme (netto)</td><td id="total">–</td></tr></tfoot></table>
      <p class="muted"><strong>Tagessatz:</strong> Kilometer <strong>inklusive bis 300 km</strong>, darüber Aufpreis.</p>
    </div>
  </div>
</section></div>

<footer id="footer"><p class="copyright">© <span id="y"></span> MASZ Solutions · <a href="impressum.html">Impressum</a> · <a href="datenschutz.html">Datenschutz</a></p></footer>
</div>

<script>
document.getElementById('y').textContent=new Date().getFullYear();
(function(){
  const $ = id => document.getElementById(id);
  const PRICES = { km:{rate:0.81,min:67}, hour:{rate:32}, day:{rate:194}, stand:{freeMins:20,rate:17}, nightHolidayPct:0.25 };
  function euro(n){ return (Math.round(n*100)/100).toFixed(2).replace('.', ',') + ' €'; }
  function toggleFields(){
    const m = $("mode").value;
    document.querySelectorAll(".mode-km").forEach(el=>el.style.display=(m==="km")?"grid":"none");
    document.querySelectorAll(".mode-hour").forEach(el=>el.style.display=(m==="hour")?"grid":"none");
    document.querySelectorAll(".mode-day").forEach(el=>el.style.display=(m==="day")?"grid":"none");
  }
  function calc(){
    const mode=$("mode").value, distance=parseFloat($("distance")?.value||0), hours=parseFloat($("hours")?.value||0), days=parseFloat($("days")?.value||0),
          loadMins=parseFloat($("loadMins").value||0), standHours=parseFloat($("standHours").value||0), extras=parseFloat($("extras").value||0),
          night=$("nightHoliday").checked;
    let rows=[], total=0;
    const billable=Math.max(loadMins-PRICES.stand.freeMins,0), loadCost=(billable/60)*PRICES.stand.rate;
    if(billable>0){ rows.push(["Be-/Entladezeit (über 20 min)", billable+" min × "+PRICES.stand.rate+" €", euro(loadCost)]); total+=loadCost; }
    if(standHours>0){ const c=standHours*PRICES.stand.rate; rows.push(["Standzeit", standHours+" h × "+PRICES.stand.rate+" €", euro(c)]); total+=c; }
    if(mode==="km"){
      const c=distance*PRICES.km.rate;
      if(c<PRICES.km.min){ rows.push(["Kilometer (Mindestpreis greift)", distance+" km × "+PRICES.km.rate.toFixed(2)+" €", euro(PRICES.km.min)]); total+=PRICES.km.min; }
      else { rows.push(["Kilometer", distance+" km × "+PRICES.km.rate.toFixed(2)+" €", euro(c)]); total+=c; }
    }
    if(mode==="hour"){
      let c=hours*PRICES.hour.rate; if(night) c*=1+PRICES.nightHolidayPct;
      rows.push([night?"Fahrzeit (Nacht/So/FT +25%)":"Fahrzeit", hours+" h × "+PRICES.hour.rate+" €", euro(c)]); total+=c;
    }
    if(mode==="day"){
      let c=days*PRICES.day.rate; if(night) c*=1+PRICES.nightHolidayPct;
      rows.push([night?"Tagessatz (Nacht/So/FT +25%)":"Tagessatz", days+" × "+PRICES.day.rate+" €", euro(c)]);
      rows.push(["Hinweis", "<strong>Kilometer bis 300 km inklusive</strong>, darüber Aufpreis.", ""]); total+=c;
    }
    if(extras>0){ rows.push(["Maut / Sonstiges", "", euro(extras)]); total+=extras; }
    $("breakdown").innerHTML = rows.map(r=>`<tr><td>${r[0]}<br><span class='muted'>${r[1]}</span></td><td>${r[2]}</td></tr>`).join("");
    $("total").textContent = euro(total);
  }
  function save(){ const d={mode:$("mode").value, distance:$("distance")?.value||"", hours:$("hours")?.value||"", days:$("days")?.value||"", loadMins:$("loadMins").value, standHours:$("standHours").value, extras:$("extras").value, nightHoliday:$("nightHoliday").checked}; localStorage.setItem("maszRechner", JSON.stringify(d)); }
  function load(){ try{ const d=JSON.parse(localStorage.getItem("maszRechner")||"{}"); if(d.mode) $("mode").value=d.mode; if($("distance")&&d.distance!==undefined) $("distance").value=d.distance; if($("hours")&&d.hours!==undefined) $("hours").value=d.hours; if($("days")&&d.days!==undefined) $("days").value=d.days; if(d.loadMins!==undefined) $("loadMins").value=d.loadMins; if(d.standHours!==undefined) $("standHours").value=d.standHours; if(d.extras!==undefined) $("extras").value=d.extras; $("nightHoliday").checked=!!d.nightHoliday; }catch(e){} toggleFields(); }
  function resetAll(){ localStorage.removeItem("maszRechner"); $("mode").value="km"; if($("distance")) $("distance").value="250"; if($("hours")) $("hours").value="6"; if($("days")) $("days").value="1"; $("loadMins").value="30"; $("standHours").value="1"; $("extras").value="0"; $("nightHoliday").checked=false; $("breakdown").innerHTML="<tr><td>Bitte Eingaben setzen und „Berechnen“ klicken.</td></tr>"; $("total").textContent="–"; toggleFields(); }
  $("mode").addEventListener("change", toggleFields);
  $("calcBtn").addEventListener("click", calc);
  $("saveBtn").addEventListener("click", save);
  $("resetBtn").addEventListener("click", resetAll);
  window.addEventListener("DOMContentLoaded", load);

  document.getElementById('bookBtn').addEventListener('click', function(e){
    e.preventDefault();
    const t=document.getElementById('total').textContent.trim();
    if(!t||t==='–'){ alert('Bitte zuerst berechnen.'); return; }
    const amount=parseFloat(t.replace(/[^\d.,]/g,'').replace('.','').replace(',','.')); if(!(amount>0)){ alert('Ungültiger Betrag.'); return; }
    const url=new URL('anfrage.html', location.href); url.searchParams.set('amount', amount.toFixed(2)); url.searchParams.set('mode', document.getElementById('mode').value);
    window.location.href=url.toString();
  });
})();
</script>
</body></html>
