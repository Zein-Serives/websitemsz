if (location.protocol === 'http:' && location.hostname && !location.hostname.includes('localhost')) { location.href = 'https://' + location.host + location.pathname + location.search + location.hash; }
const navToggle=document.querySelector('.nav-toggle');const nav=document.querySelector('.nav');if(navToggle){navToggle.addEventListener('click',()=>nav.classList.toggle('open'));}
const path=location.pathname.replace(/\/$/,'');document.querySelectorAll('.nav-link').forEach(a=>{const h=a.getAttribute('href').replace(/\/$/,'');if(h===path)a.classList.add('active');});
const dEl=document.getElementById('promo-deadline');if(dEl){const d=new Date();d.setDate(d.getDate()+30);dEl.textContent=d.toLocaleDateString(document.documentElement.lang||'de-DE',{day:'2-digit',month:'2-digit',year:'numeric'});}
(function(){const here=location.pathname;const pref=(navigator.language||'').toLowerCase();if(here.startsWith('/en/')||here.startsWith('/ar/'))return;if(pref.startsWith('en')){const n=document.createElement('div');n.className='ribbon';n.style.position='static';n.innerHTML='Prefer English? <a href="/en/">Switch to EN</a>';document.body.insertBefore(n,document.body.firstChild);}else if(pref.startsWith('ar')){const n=document.createElement('div');n.className='ribbon';n.style.position='static';n.innerHTML='تفضل العربية؟ <a href="/ar/">اضغط هنا</a>';document.body.insertBefore(n,document.body.firstChild);}})();